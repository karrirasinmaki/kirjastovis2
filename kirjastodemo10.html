<!DOCTYPE html>
<html class=" js flexbox canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths"
lang="fi">
<head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252">

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Kirjastohankkeet demo</title>

<style type="text/css" media="all">

</style>
<!--
<style type="text/css" media="print">
@import url("http://hankkeet.kirjastot.fi/themes/bartik/css/print.css?n447my");
</style>
-->
    <link rel="stylesheet" href="css/foundation.css" />
		<link rel="stylesheet" href="css/chosen2.css" />
<!--    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
		<link href="css/bootstrap.min.css" rel="stylesheet"> -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,300,400,700,600' rel='stylesheet' type='text/css'>
    <script src="js/vendor/modernizr.js"></script>
    <!--<script src="//ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js"></script>-->
    <script>
//      WebFont.load({
//        google: {
//          families: ['Open Sans']
//        }
//      });
    </script>
    <script type="text/javascript">
      function export_svg() {
        $('svg').svg();
        var xml = $('svg').svg('get').toSVG();
        $('#svgexport').html(xml.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;'));
      }
    </script>
    <link rel="stylesheet" type="text/css" href="css/largeperus3.css">
		<link rel="stylesheet" media="screen and (min-device-width: 1400px)" href="css/large6.css" />
		<link rel="stylesheet" media="screen and (max-device-width: 1399px)" href="css/large6.css" />
  </head>
	<body id='kirjastovis_container'>
	<div id="kif">
	      <iframe width="100%" height="44" frameborder="0" scrolling="no" src="http://gfx.kirjastot.fi/kifi/kifi-banner-pro-fi.html">
        </iframe>
	</div>
		<div id="header" class="without-secondary-menu">
     <div id="ylapalkki">
			 <div id="name-and-slogan">

                    <h1 id="site-name">
              <a href="/?language=fi" title="Etusivu" rel="home">
              <span>Hankerekisterin<b/> Visualisointi</span></a>            </h1>
       </div> <!-- /#name-and-slogan tabindex="2" -->

			 <div id="form-menut">
						<div id="multiple">
          	  <select data-placeholder="Tarkastele kohderyhmitt&auml;in" class="chosen-select" multiple style="width:370px;" >
                    <option value=""></option>
										<option value="erityisryhm&auml;t">Erityisryhm&auml;t</option>
       							<option value="ik&auml;&auml;ntyneet">Ik&auml;&auml;ntyneet</option>
       							<option value="kirjaston asiakkaat">Kirjaston asiakkaat</option>
       							<option value="kirjaston ei-k&auml;ytt&auml;j&auml;t">Kirjaston ei-k&auml;ytt&auml;j&auml;t</option>
       							<option value="kirjaston henki">Kirjaston henkil&ouml;kunta</option>
       							<option value="lapsiperheet">Lapsiperheet</option>
										<option value="alle 13 v">Lapset (alle 13 v.)</option>
       							<option value="13-19">Nuoret (13-19 v.)</option>
       							<option value="19.-29">Nuoret aikuiset (19-29 v.)</option>
										<option value="ammattiryhm">Tietty ammattiryhm� (esim. opettajat)</option>
										<option value="Ty�ik�inen v�est�">Ty�ik�inen v�est�</option>
										<option value="Maahanmuuttajat">Maahanmuuttajat</option>
										<option value="Ty�tt�m�t">Ty�tt�m�t</option>
										<option value="Sidosryhm">Sidosryhm�t</option>
										<option value="Muut">Muu</option>
						</select>
						</div>

						<div id="search_section" class="control">
								 <form id="search_form" action="" method="post">
								 <p class="search_title"><input type="testi" class="tftextinput2" id="search" value="Etsi hanketta nimelt�"/></p>
								 </form>
								 <div class="tfclear"></div>
						</div>
<!--						<form method="get" action="">
	<input type="text" name="search" id="search" value="" />
	<input type="submit" name="submit" value="Search" />
</form> -->
				</div>

				<div id="viz_nav_container">
          <div id="viz_nav_inner_container">
						<div class="viz_nav btn" data-name="teema">
              <div class="sub_header">Tarkastele</div>
              <div class="header">Teemoittain</div>
            </div>
            <div class="viz_nav btn" data-name="maakunta">
              <div class="sub_header">Tarkastele</div>
              <div class="header">Maakunnittain</div>
            </div>
            <div class="viz_nav btn" data-name="kunta">
              <div class="sub_header">Tarkastele</div>
              <div class="header">Kunnittain</div>
            </div>
						<div class="viz_nav btn" data-name="vaikutusalue">
              <div class="sub_header">Tarkastele</div>
              <div class="header">Vaikutusalueittain</div>
            </div>
            <div class="viz_nav btn" data-name="amount">
              <div class="sub_header">Tarkastele</div>
              <div class="header">Koon mukaan</div>
            </div>
						<div class="viz_nav btn" data-name="avi">
              <div class="sub_header">Tarkastele</div>
              <div class="header">Avi-alueittain</div>
            </div>
						<div class="viz_nav btn" data-name="vuosi">
              <div class="sub_header">Tarkastele</div>
              <div class="header">Vuosittain</div>
            </div>
						<div class="viz_nav btn" data-name="tyyppi">
              <div class="sub_header">Tarkastele</div>
              <div class="header">Hanketyypeitt&auml;in</div>
            </div>
          </div>
		    </div>

			  </div>
     </div>

<!--  <body id='kirjastovis_container'>
<!--    <a href="http://gfx.kirjastot.fi/kifi/kifi-banner-pro-fi.html"><img style="position: absolute; top: 65px; left: 0; border: 0;" src="http://gfx.kirjastot.fi/kifi/kifi-banner-pro-fi.html" alt="xxx"></a>
    {% include nav.html %} -->
<!--
    <div class="row">
        <div id="viz_nav_container">
          <div id="viz_nav_inner_container">
						<div class="viz_nav btn" data-name="teema">
              <div class="sub_header">Tarkastele</div>
              <div class="header">Teemoittain</div>
            </div>
            <div class="viz_nav btn" data-name="vaikutusalue">
              <div class="sub_header">Tarkastele</div>
              <div class="header">Vaikutusalueittain</div>
            </div>
            <div class="viz_nav btn" data-name="maakunta">
              <div class="sub_header">Tarkastele</div>
              <div class="header">Maakunnittain</div>
            </div>
            <div class="viz_nav btn" data-name="kunta">
              <div class="sub_header">Tarkastele</div>
              <div class="header">Kunnittain</div>
            </div>
            <div class="viz_nav btn" data-name="amount">
              <div class="sub_header">Tarkastele</div>
              <div class="header">Koon mukaan</div>
            </div>
						<div class="viz_nav btn" data-name="tyyppi">
              <div class="sub_header">Tarkastele</div>
              <div class="header">Hanketyypeitt&auml;in</div>
            </div>
          </div>
<!-- 				<div class="row">
<!-- 				</div> -->
<!--				<div id="viz_nav_container">
            <form id="myForm">
									<h6>Tarkastele kohderyhmitt&auml;in:</h6>
									<input type="checkbox" name="radioName" value=";" /> Kaikki
									<input type="checkbox" name="radioName" value="nuoret" /> Nuoret
									<input type="checkbox" name="radioName" value="vanhukset" /> Vanhukset
									<input type="checkbox" name="radioName" value="lapset" /> Lapset
									<input type="checkbox" name="radioName" value="asiakkaat" /> Asiakkaat
									<input type="checkbox" name="radioName" value="henkil�kunta" /> Henkil&ouml;kunta
						</form>
						<div id="search_section" class="control">
								 <form id="search_form" action="" method="post">
								 <p class="search_title"> Etsi hanketta nimelt&auml;: <input type="text" class="text-input" id="search" value=""/></p>
								 </form>
						</div>
						<p>Search String: <span id="str">N/A</span>

			  </div>
      </div>
    </div>

    <br /> -->
    <div class="row full-width">
      <div id="vis-container" class="large-12 columns">
			    <div id='right-sidebar'>
<!--					   <h2>
                        V&auml;rit:</h2>
						<div>
            <select id='color-everything-by'>
                            <option value=''></option>
                        </select></div>
			       <div> -->
                 <a id='right-sidebar-toggle' <!-- href='#'>V&auml;rit (piilota klikkaamalla) --> </a>

             </div>
             <div id='right-sidebar-container'>
						   <h5> Vaihda v&auml;rityst&auml;:</h5>
						 <div>
              <select id='color-everything-by'>
     <!--            <option value=''</option> -->
								 <option value="Lookup_Teema" selected="selected">Teema</option>
								 <option value="Lookup_Maakunta">Maakunta</option>
								 <option value="Lookup_Vaikutusalue">Vaikutusalue</option>
								 <option value="Lookup_Aluehallintovirasto">Aluehallintovirasto</option>
								 <option value="Lookup_Vuosi">Vuosi</option>
								 <option value="Lookup_Hanketyyppi">Hanketyyppi</option>
								 <option value="Lookup_Kieli">Kieli</option>
		<!--					<option value='' selected="selected">Vaihda v�ri�</option>	 <option value="Lookup_Maakunta" selected="selected">Lookup_Maakunta</option> -->

                 </select></div>
							<div id='right-sidebar-color-container'>
							</div>

<!--        <div id="vis"></div>
<!--				  <div id='right-sidebar'>
<!--             <h2>V&auml;rit:</h2>
						<div>
              <select id='color-everything-by'>
                 <option value=''></option>
              </select></div>
            </div>-->
<!--						  <div>
                 <a id='right-sidebar-toggle' href='#'>V&auml;rikoodit</a>
              </div>
                  <div id='right-sidebar-container'>
                  </div>
          </div> -->
				  </div>


					<div id="vis"></div>
					  <div class="panel">
								 <h5>Hankerekisterin visualisointi</h5>
								 <p>Tervetuloa yleisten kirjastojen hankerekisterin visualisointiin. Visualisoinnin avulla voit tutustua kirjastojen kehitt&auml;mishankkeisiin. </p>

								 <h5>Kuinka visualisointi toimii</h5>
								 <p>Yksi pallo edustaa yht� hanketta. Pallon koko kertoo, kuinka paljon avustusta hankkeelle on my�nnetty. Viem�ll� hiirenosoittimen pallon
							     p��lle saa hankkeesta lis�tietoa. Palloa klikkaamalla p��see hankkeen nettisivuille.</p>
									<p>Hankkeiden jakaumaa voi muuttaa yl�palkin "tarkastele"-valikoista. V�rityst� voi muuttaa vasemmassa sivuapalkissa olevasta valikosta. My�s Hankkeiden kohderyhmi� voi tarkastella yl�-valikossa olevasta pudotusvalikosta. Etsi-toiminnolla voi etsi� hanketta nimelt�. <p/>

								 <h5>Tutustu my&ouml;s muihin visualisointeihin</h5>
								 <p><a href="http://hankevis.net" title="Hyv�t k�yt�nn�t">Hyv&auml;t k&auml;yt&auml;nn&ouml;t</a>.</p>
								 <p><a href="http://hankevis.net" title="Hankkeet, joille ei my�nnetty tukea">Hankkeet, joille ei my&ouml;nnetty tukea</a>.</p>
<!--
<div style="clear:both;"></div>
<div class="columns">
	<div class="colleft">
	<h5>Tutustu my�s muihin visualisointeihin</h5>
		<ul>
			<li><a href="http://spyrestudios.com/" title="home">Hyv�t k�yt�nn�t</a></li>
			<br/>
			<li><a href="http://spyrestudios.com/about/" title="about">Kielteisen p��t�ksen saaneet hankkeet</a></li>
		</ul>
	</div>

	<div class="colright">
		<h3>Social Stuff</h3>
		<ul>
			<li><a href="http://twitter.com/jophillips" title="Twitter">Twitter</a></li>
			<li><a href="http://designbump.com/user/147" title="DesignBump">DesignBump</a></li>
			<li><a href="http://digg.com/users/jophillips" title="Digg">Digg</a></li>
			<li><a href="http://delicious.com/jon.phillips" title="Del.Icio.Us">Del.Icio.Us</a></li>
			<li><a href="http://designmoo.com/users/jonphillips" title="DesignMoo">DesignMoo</a></li>
		</ul>
	</div> -->
				 		 		<p>Visualisoinnin toteuttaja <a href="http://hankevis.net" color="white" title="Vivid Information Oy">Vivid Information Oy</a>.</p>
<!--								<p>Search String: <span id="str">N/A</span>
<!--						</div>


						<div style="clear:both;"></div> -->

						</div>
						<div id="kieli">
						  <p><a href="http://hankevis.net/kirjastovisdemo/kirjastodemo4.html" title="Visualisointi suomeksi">Suomi</a> / <a href="http://hankevis.net/kirjastovisdemo/kirjastodemosv.html" title="Visualisering p� svenska">Svenska</a> / <a href="http://hankevis.net/kirjastovisdemo/kirjastodemoen.html" title="Visualizations in english">English</a> </p>
						</div>
						<a class="trigger" href="#" data-text-swap="N�yt� info" data-text-original="Piilota info">Piilota info</a>

      </div>
    </div>


    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<!--    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
		<script type="text/javascript" src="js/vendor/jquery.js"></script>
    <script type="text/javascript" src="js/jquery.svg.js"></script>
    <script type="text/javascript" src="js/foundation.min.js"></script> -->
<!--		<script src="js/bootstrap.min.js"></script>

    <script type="text/javascript" src="js/dat.gui.min.js"></script>
    <script type="text/javascript" src="js/d3.v3.js"></script>
    -->
    <script type="text/javascript" src="js/d3.v3.min.js"></script>
    <script type="text/javascript" src="js/util.js"></script>
    <script type="text/javascript" src="js/common.js"></script>
    <script type="text/javascript" src="js/d3.tip.v0.6.3.js"></script>
		<script type="text/javascript" src="js/jquery.mobile.custom.min.js"></script>
    <script type="text/javascript" src="js/libs/jquery.animate-colors-min.js"></script>
		<script type="text/javascript" src="js/chosen.jquery.min.js" ></script>

    <!--
    <script defer src="js/plugins.js"></script>
    -->
    <script defer src="js/script.js"></script>
    <script src="js/CustomTooltip.js"></script>
<!--    <script src="js/d3.csv.min.js"></script>
		<!--
    <script src="js/libs/coffee-script.js"></script>
    <script src="js/libs/d3.geom.min.js"></script>
		-->
    <script type="text/javascript" src="js/vis6.js"></script>
		<script type="text/javascript" src="js/jquery.sumoselect.min.js"></script>
    <script type="text/javascript" src="js/lodash_2.4.1.js"></script>
    <script type="text/javascript" src="js/libs/queue.v1.min.js"></script>
    <script type="text/javascript">

        // This will be called when HankeVis visualization
        // initialization is ready
        var HankeVisReady = function() {
            console.log("HankeVis ready");
            var colorBy = $('#color-everything-by option:selected').val();
            console.log(colorBy);
            color_by(colorBy);
        };

        // Launch HankeVis visualization and
        // assign callback function
        HankeVis(HankeVisReady);

//        $(function() {
            var controlsVisible = true;

 //       });

//				$(document).ready(function(){
				  $(".trigger").click(function(){
					  var el = $(this);
  				  el.text() == el.data("text-swap")
    			    ? el.text(el.data("text-original"))
    				  : el.text(el.data("text-swap"));
					  $(".panel").toggle("fast");
						$(this).toggleClass("active");
						return false;
					});
	//			});

        var initialise_form = function (selectionOptions) {
            var colorSelect = $('#color-everything-by');
            var SetColors = function () {
                var colorBy = colorSelect.val();
                console.log(colorBy);
                color_by(colorBy);
            };
	//	        $(window).load(function() {
	//          window.onload(function() {
//						$(document).ready(function(){
						colorSelect.change(SetColors);
        };
//						});


   //     function get_distinct_values(records, keyType, key) {
 //           var allValues = {};
 //           for (var i in records) {
    //            var value = records[i][key];
    //            allValues[value] = true;
  //          }
//
    //        var allValuesArray = [];
    //        for (var i in allValues)
  //              allValuesArray.push(i);
//
   //         if (keyType == 'testi1')
   //             allValuesArray.sort(function (a, b) { return Number(a) - Number(b); });
  //          else
  //              allValuesArray.sort();
  //          return allValuesArray
  //      }

        function keyToLookup(key) {
            var firstPartEnds = key.indexOf('_');
            if (firstPartEnds <= 0)
                return { key: key, type: key, title: key };

            var firstPart = key.substring(0, firstPartEnds);
            var secondPart = key.substring(firstPartEnds + 1);

            return { key: key, type: firstPart, title: secondPart };
        }
//<!--        function render_filters_colors_and_groups(csv) {
        function render_colors(records) {
            var first = records[0];
            var lookups = [];
            for (var key in first) {
                var lookup = keyToLookup(key);
                switch (lookup.type) {
                    case "Lookup":
                        lookups.push(lookup);
                        break;
				//						case "Lookup_Maakunta":
        //                lookups.push(lookup_maakunta);
        //                break;
                    default:
                        break;
                }
            }


            initialise_form(lookups);
        }
//				});

//        function hide_color_chart() {
// //           var right = $('#right-sidebar');
//						var right = $('#right-sidebar-toggle');
//            var rightContainer = $('#right-sidebar-color-container');
//            rightContainer.fadeOut(500, function () {
//                rightContainer.empty();
//            });
//        }
        function show_color_chart(what_to_color_by, color_mapper) {
//            var right = $('#right-sidebar');
						var right = $('#right-sidebar-toggle');
            rightContainer = $('#right-sidebar-color-container');
            right.fadeOut(500, function () {
               rightContainer.empty();

//                var lookup = keyToLookup(what_to_color_by);
//                $('<h3>' + lookup.title + '</h3>').appendTo(rightContainer);

                var table = $('<table />');
                for (var key in color_mapper) {
                    var row = $('<tr/>');

                    var cell = $('<td/>');
                    var square = $('<div style="width: 15px; height: 15px; background: ' + color_mapper[key] + ';">&nbsp;</div>');
                    square.appendTo(cell);
                    cell.appendTo(row);

                    cell = $('<td/>');
                    cell.text(' ' + key + ' ');
                    cell.appendTo(row);
                    row.appendTo(table);
                }

                table.appendTo(rightContainer);
//                right.fadeIn(500);
//								right.fadeIn(0);
            });
        }
//	});
//		window.onload = function(){
//		$(function() {
		var defaultText = "Etsi hanketta nimelt�";
			var submitbutton = document.getElementById("search");
			submitbutton.value = defaultText;
			submitbutton.onfocus = function() {
			  if (this.value == defaultText) {
				  this.value = '';
		    }
	    }
			submitbutton.onblur = function() {
		    if (this.value == "") {
			    this.value = defaultText;
		    }
	    }

			   $('.control-links a').click(function() {
              $(this).siblings().removeClass('active');
              $(this).addClass('active');
              });


			 if (document.documentElement.clientWidth > 1000 < 1200) {
        document
            .querySelector("meta[name=viewport]")
            .setAttribute('content', 'initial-scale=0.78');
        }
        if (document.documentElement.clientWidth < 999) {
        document
            .querySelector("meta[name=viewport]")
            .setAttribute('content', 'initial-scale=0.58');
        }
				if (document.documentElement.clientWidth < 400) {
        document
            .querySelector("meta[name=viewport]")
            .setAttribute('content', 'initial-scale=0.25');
        }
//			$(document).ready(function() {
//			 $('.testselect3').SumoSelect({ okCancelInMulti: true ,
//			                                 triggerChangeCombined: false
//		                               });
//			});

  //  });
  </script>
    <script>
//     (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
//      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
//      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
//      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
//
//      ga('create', 'UA-50186636-1', 'test.github.io');
//      ga('send', 'pageview');
//
    </script>

  </body>
</html>
